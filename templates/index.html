<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Ticket Submission</title>
</head>
<body>
    <h1>Ticket Submission</h1>

    <!-- Ticket-Formular -->
    <form method="POST" action="/">
        <label for="chosen_category">Select Category:</label><br />
        <select id="chosen_category" name="chosen_category">
            {% for cat in categories %}
                <option value="{{ cat }}" {% if cat == chosen_category %} selected {% endif %}>
                    {{ cat }}
                </option>
            {% endfor %}
        </select>
        <br /><br />

        <label for="ticket_description">Problem Description:</label><br />
        <textarea id="ticket_description" name="ticket_description" rows="5" cols="50">{{ ticket_description or '' }}</textarea>
        <br /><br />

        <button type="submit">Submit Ticket</button>
    </form>

    <!-- Erfolgsmeldung -->
    {% if success %}
        <p style="color: green; margin-top: 20px;">
            Success! The algorithm confirmed your chosen category '{{ chosen_category }}'.
        </p>
        <form action="{{ url_for('survey') }}" method="get">
            <button type="submit">Proceed to Survey</button>
        </form>
    {% endif %}

    <!-- Warnung bei NichtÃ¼bereinstimmung -->
    {% if mismatch %}
        <p style="color: red;">
            Warning: The algorithm suggests the category '{{ predicted_category }}'.
        </p>
        <form action="/" method="post" style="display: inline;">
            <input type="hidden" name="ticket_description" value="{{ ticket_description }}">
            <input type="hidden" name="chosen_category" value="{{ predicted_category }}">
            <input type="hidden" name="change_category" value="true">
            <button type="submit">Change</button>
        </form>
        <form action="{{ url_for('survey') }}" method="get" style="display: inline;">
            <button type="submit">Proceed Anyway</button>
        </form>
    {% endif %}
</body>
</html>